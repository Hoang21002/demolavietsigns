import{_ as Y}from"./CvTT1wey.js";import{a as Z,_ as H}from"./DtnXbA_I.js";import{f as K,_ as R}from"./Bxv87sc4.js";import W from"./DrE4RtAR.js";import{l as tt,r as et,d as M,m,v as F,P as i,Z as c,Q as _,I as x,a0 as P,J as I,u,L as r,a3 as V,X as f,Y as v,$ as B}from"./B8xjQDrD.js";const ot={class:""},nt={class:"w-full space-y-5"},at={key:1,class:""},st={class:"font-bold text-second text-base mb-1"},lt={key:2,class:""},rt={class:"grid grid-cols-2 gap-4"},ut={class:"font-bold text-second text-base mb-1"},it={key:1,class:"w-full"},ct={class:"flex flex-col gap-2 w-full"},pt={class:"flex flex-col gap-2 w-full"},dt={class:"flex justify-between items-center w-9/12"},_t={key:0,class:"font-medium text-sm"},mt={key:0},ft=tt({__name:"OptionProduct",props:{optionProp:{},priceProp:{},quantityProp:{},perview:{}},emits:["change"],setup(p,{emit:O}){const T=O,l=et({}),h=M(p.perview),Q=m(()=>!(h.value>=p.quantityProp.price_quantity.length)),$=()=>{h.value>=p.quantityProp.price_quantity.length||(h.value+=p.perview)},A=()=>{p.optionProp.list_option.length<=0||p.optionProp.list_option.forEach((t,e)=>{l[e]={type:t.type,currenIndex:0,option:t.type!=="input"?t.option[0]:q(t.option,1),value:0}})},q=(t,e)=>t.map((n,a)=>({...n,value:e||a})),U=M(0),z=t=>{U.value=t},X=t=>{if(t==null||t<1)return 1;let a=Number(t);return isNaN(a)||a<1?1:a>12?12:a},j=(t,e)=>{l[e].option[t].value=X(l[e].option[t].value)},D=(t,e)=>{l[e].option=t},E=(t,e)=>{l[e].option=t};function C(t,e,n){const a=t*(1-e/100),y=Math.round(a*100)/100,g=y/n,o=Math.round(g*100)/100;return{total:y,perUnit:o===t?0:o}}const N=m(()=>{const t=[],e=[];for(const n in l){const a=l[n];a.type==="input"?e.push(...Array.isArray(a.option)?a.option:[a.option]):t.push(a.option)}return{optionSelect:t,optionInput:e}}),L=m(()=>N.value.optionSelect.reduce((e,n)=>e+((n==null?void 0:n.price)??0),0)),G=m(()=>N.value.optionInput.reduce((e,n)=>n.value>1&&n.price>0?e+(n.price?n.price*(n.value-1):0):e,0)),w=m(()=>L.value+G.value+p.priceProp),J=m(()=>p.quantityProp.price_quantity.map(e=>({quantity:e.quantity,discount:e.discount,price:C(w.value,e.discount,e.quantity).total.toFixed(2),perUnit:C(w.value,e.discount,e.quantity).perUnit.toFixed(2)}))),S={base:"inputNumber",color:{white:{outline:"focus:ring-black"}}};return F(()=>p.optionProp.list_option,()=>{A()},{deep:!0,immediate:!0}),F(w,t=>{T("change",t)},{deep:!0,immediate:!0}),(t,e)=>{const n=Y,a=Z,y=H,g=K;return r(),i("section",ot,[c("div",nt,[t.optionProp.status&&t.optionProp.list_option.length>0?(r(!0),i(x,{key:0},P(t.optionProp.list_option,(o,s)=>(r(),i(x,{key:s},[o.type==="tab"?(r(),I(W,{key:0,title:o.title,options:o.option,modelValue:u(l)[s].currenIndex,"onUpdate:modelValue":d=>u(l)[s].currenIndex=d,onChange:d=>D(d,s)},null,8,["title","options","modelValue","onUpdate:modelValue","onChange"])):_("",!0),o.type==="select"?(r(),i("div",at,[c("h3",st,f(o.title),1),V(n,{size:"lg",class:"w-full",ui:S,variant:"outline",placeholder:"Custom",options:q(o.option),onChange:d=>E(o.option[u(l)[s].value],s),modelValue:u(l)[s].value,"onUpdate:modelValue":d=>u(l)[s].value=d,"option-attribute":"label"},null,8,["options","onChange","modelValue","onUpdate:modelValue"])])):_("",!0),o.type==="input"?(r(),i("div",lt,[c("div",rt,[(r(!0),i(x,null,P(o.option,(d,b)=>(r(),I(y,{key:b,class:"w-full"},{label:v(()=>[c("h3",ut,f(d.label),1)]),help:v(()=>e[1]||(e[1]=[B(" 1 ft to 12 ft ")])),default:v(()=>[V(a,{modelValue:u(l)[s].option[b].value,"onUpdate:modelValue":k=>u(l)[s].option[b].value=k,type:"number",onBlur:k=>j(b,s),ui:S,size:"lg"},{trailing:v(()=>e[0]||(e[0]=[c("span",{class:"text-gray-500 dark:text-gray-400 text-xs"},"Ft",-1)])),_:2},1032,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024))),128))])])):_("",!0)],64))),128)):_("",!0),t.quantityProp.status?(r(),i("div",it,[e[2]||(e[2]=c("h3",{class:"font-bold text-second text-base mb-1"},"Quantity",-1)),c("div",ct,[c("div",pt,[(r(!0),i(x,null,P(u(J).slice(0,u(h)),(o,s)=>(r(),i("div",{key:s},[V(g,{onClick:d=>z(s),ui:{block:"justify-between"},block:"",size:"lg",variant:u(U)===s?"solid":"outline",color:u(U)===s?"red":"gray"},{leading:v(()=>[c("p",null,f(o.quantity),1)]),default:v(()=>[c("div",dt,[c("p",null,[B("$"+f(o.price)+" ",1),o.discount?(r(),i("strong",_t,f(o.perUnit)+" / until",1)):_("",!0)]),o.discount?(r(),i("p",mt,f(o.discount)+"% saving",1)):_("",!0)])]),_:2},1032,["onClick","variant","color"])]))),128)),u(Q)?(r(),I(g,{key:0,onClick:$,label:"See more quantities",variant:"ghost",color:"black",class:"underline underline-offset-2 block mx-auto"})):_("",!0)])])])):_("",!0)])])}}}),xt=R(ft,[["__scopeId","data-v-c1c4a6db"]]);export{xt as default};
