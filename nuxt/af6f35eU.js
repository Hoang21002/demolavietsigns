import{_ as Y}from"./6gMT-Wg2.js";import{a as Z,_ as H}from"./DVxc-rdm.js";import{f as K,_ as R}from"./jrZRURmu.js";import W from"./BlS8U3iy.js";import{l as tt,r as et,d as M,m,v as F,P as c,Z as p,Q as f,I as P,a0 as w,J as I,u,L as l,a3 as V,X as v,Y as _,$ as B}from"./B8xjQDrD.js";const ot={class:""},nt={class:"w-full space-y-5"},rt={key:1,class:""},at={class:"font-bold text-second text-base mb-1"},st={key:2,class:""},lt={class:"grid grid-cols-2 gap-4"},it={class:"font-bold text-second text-base mb-1"},ut={key:1,class:"w-full"},ct={class:"flex flex-col gap-2 w-full"},pt={class:"flex flex-col gap-2 w-full"},dt={class:"flex justify-between items-center w-9/12"},ft={key:0,class:"font-medium text-sm"},mt={key:0},vt=tt({__name:"OptionProduct",props:{optionProp:{},priceProp:{},quantityProp:{},perview:{}},emits:["change"],setup(i,{emit:O}){const T=O,s=et({}),y=M(i.perview),Q=m(()=>!(y.value>=i.quantityProp.price_quantity.length)),$=()=>{y.value>=i.quantityProp.price_quantity.length||(y.value+=i.perview)},A=()=>{i.optionProp.list_option.length<=0||i.optionProp.list_option.forEach((t,e)=>{s[e]={type:t.type,currenIndex:0,option:t.type!=="input"?t.option[0]:q(t.option,1),value:0}})},q=(t,e)=>t.map((n,r)=>({...n,value:e||r})),x=M(0),z=t=>{x.value=t},X=t=>{if(t==null||t<1)return 1;let r=Number(t);return isNaN(r)||r<1?1:r>12?12:r},j=(t,e)=>{s[e].option[t].value=X(s[e].option[t].value)},D=(t,e)=>{s[e].option=t},E=(t,e)=>{s[e].option=t};function C(t,e,n){const r=t*(1-e/100),h=Math.round(r*100)/100,g=h/n,o=Math.round(g*100)/100;return{total:h,perUnit:o===t?0:o}}const N=m(()=>{const t=[],e=[];for(const n in s){const r=s[n];r.type==="input"?e.push(...Array.isArray(r.option)?r.option:[r.option]):t.push(r.option)}return{optionSelect:t,optionInput:e}}),L=m(()=>N.value.optionSelect.reduce((e,n)=>e+((n==null?void 0:n.price)??0),0)),G=m(()=>N.value.optionInput.reduce((e,n)=>n.value>1&&n.price>0?e+(n.price?n.price*(n.value-1):0):e,0)),U=m(()=>typeof i.priceProp=="string"?i.priceProp:L.value+G.value+i.priceProp),J=m(()=>typeof i.priceProp=="string"?i.priceProp:i.quantityProp.price_quantity.map(e=>({quantity:e.quantity,discount:e.discount,price:C(U.value,e.discount,e.quantity).total.toFixed(2),perUnit:C(U.value,e.discount,e.quantity).perUnit.toFixed(2)}))),S={base:"inputNumber",color:{white:{outline:"focus:ring-black"}}};return F(()=>i.optionProp.list_option,()=>{A()},{deep:!0,immediate:!0}),F(U,t=>{T("change",t)},{deep:!0,immediate:!0}),(t,e)=>{const n=Y,r=Z,h=H,g=K;return l(),c("section",ot,[p("div",nt,[t.optionProp.status&&t.optionProp.list_option.length>0?(l(!0),c(P,{key:0},w(t.optionProp.list_option,(o,a)=>(l(),c(P,{key:a},[o.type==="tab"?(l(),I(W,{key:0,title:o.title,options:o.option,modelValue:u(s)[a].currenIndex,"onUpdate:modelValue":d=>u(s)[a].currenIndex=d,onChange:d=>D(d,a)},null,8,["title","options","modelValue","onUpdate:modelValue","onChange"])):f("",!0),o.type==="select"?(l(),c("div",rt,[p("h3",at,v(o.title),1),V(n,{size:"lg",class:"w-full",ui:S,variant:"outline",placeholder:"Custom",options:q(o.option),onChange:d=>E(o.option[u(s)[a].value],a),modelValue:u(s)[a].value,"onUpdate:modelValue":d=>u(s)[a].value=d,"option-attribute":"label"},null,8,["options","onChange","modelValue","onUpdate:modelValue"])])):f("",!0),o.type==="input"?(l(),c("div",st,[p("div",lt,[(l(!0),c(P,null,w(o.option,(d,b)=>(l(),I(h,{key:b,class:"w-full"},{label:_(()=>[p("h3",it,v(d.label),1)]),help:_(()=>e[1]||(e[1]=[B(" 1 ft to 12 ft ")])),default:_(()=>[V(r,{modelValue:u(s)[a].option[b].value,"onUpdate:modelValue":k=>u(s)[a].option[b].value=k,type:"number",onBlur:k=>j(b,a),ui:S,size:"lg"},{trailing:_(()=>e[0]||(e[0]=[p("span",{class:"text-gray-500 dark:text-gray-400 text-xs"},"Ft",-1)])),_:2},1032,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024))),128))])])):f("",!0)],64))),128)):f("",!0),t.quantityProp.status?(l(),c("div",ut,[e[2]||(e[2]=p("h3",{class:"font-bold text-second text-base mb-1"},"Quantity",-1)),p("div",ct,[p("div",pt,[(l(!0),c(P,null,w(u(J).slice(0,u(y)),(o,a)=>(l(),c("div",{key:a},[V(g,{onClick:d=>z(a),ui:{block:"justify-between"},block:"",size:"lg",variant:u(x)===a?"solid":"outline",color:u(x)===a?"red":"gray"},{leading:_(()=>[p("p",null,v(o.quantity),1)]),default:_(()=>[p("div",dt,[p("p",null,[B("$"+v(o.price)+" ",1),o.discount?(l(),c("strong",ft,v(o.perUnit)+" / until",1)):f("",!0)]),o.discount?(l(),c("p",mt,v(o.discount)+"% saving",1)):f("",!0)])]),_:2},1032,["onClick","variant","color"])]))),128)),u(Q)?(l(),I(g,{key:0,onClick:$,label:"See more quantities",variant:"ghost",color:"black",class:"underline underline-offset-2 block mx-auto"})):f("",!0)])])])):f("",!0)])])}}}),Pt=R(vt,[["__scopeId","data-v-f16890de"]]);export{Pt as default};
